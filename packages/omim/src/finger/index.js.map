{"version":3,"sources":["webpack://MFinger/webpack/universalModuleDefinition","webpack://MFinger/webpack/bootstrap","webpack://MFinger/./src/finger/index.tsx","webpack://MFinger/external {\"commonjs\":\"omi\",\"commonjs2\":\"omi\",\"amd\":\"omi\",\"root\":\"Omi\"}"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFa;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA,8CAA8C,cAAc;AAC5D,YAAY,mBAAO,CAAC,gBAAK;AACzB;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B,GAAG;AACtD;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;AC/OA,iD","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"omi\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"omi\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MFinger\"] = factory(require(\"omi\"));\n\telse\n\t\troot[\"MFinger\"] = factory(root[\"Omi\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE_omi__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/finger/index.tsx\");\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar omi_1 = require(\"omi\");\nvar Finger = /** @class */ (function (_super) {\n    __extends(Finger, _super);\n    function Finger() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.preV = { x: null, y: null };\n        _this.pinchStartLen = null;\n        _this.scale = 1;\n        _this.isSingleTap = false;\n        _this.isDoubleTap = false;\n        _this.delta = null;\n        _this.last = null;\n        _this.now = null;\n        _this.end = null;\n        _this.multiTouch = false;\n        _this.tapTimeout = null;\n        _this.longTapTimeout = null;\n        _this.singleTapTimeout = null;\n        _this.swipeTimeout = null;\n        _this.x1 = null;\n        _this.x2 = null;\n        _this.y1 = null;\n        _this.y2 = null;\n        _this.preTapPosition = { x: null, y: null };\n        // Disable taps after longTap\n        _this.afterLongTap = false;\n        _this.afterLongTapTimeout = null;\n        return _this;\n    }\n    Finger.prototype.install = function () {\n        this._handleTouchStart = this._handleTouchStart.bind(this);\n        this._handleTouchMove = this._handleTouchMove.bind(this);\n        this._handleTouchCancel = this._handleTouchCancel.bind(this);\n        this._handleTouchEnd = this._handleTouchEnd.bind(this);\n    };\n    Finger.prototype.getLen = function (v) {\n        return Math.sqrt(v.x * v.x + v.y * v.y);\n    };\n    Finger.prototype.dot = function (v1, v2) {\n        return v1.x * v2.x + v1.y * v2.y;\n    };\n    Finger.prototype.getAngle = function (v1, v2) {\n        var mr = this.getLen(v1) * this.getLen(v2);\n        if (mr === 0)\n            return 0;\n        var r = this.dot(v1, v2) / mr;\n        if (r > 1)\n            r = 1;\n        return Math.acos(r);\n    };\n    Finger.prototype.cross = function (v1, v2) {\n        return v1.x * v2.y - v2.x * v1.y;\n    };\n    Finger.prototype.getRotateAngle = function (v1, v2) {\n        var angle = this.getAngle(v1, v2);\n        if (this.cross(v1, v2) > 0) {\n            angle *= -1;\n        }\n        return angle * 180 / Math.PI;\n    };\n    Finger.prototype._handleTouchStart = function (evt) {\n        var _this = this;\n        //this.fire('touchstart', evt);\n        if (!evt.touches)\n            return;\n        this.now = Date.now();\n        this.x1 = evt.touches[0].pageX;\n        this.y1 = evt.touches[0].pageY;\n        this.delta = this.now - (this.last || this.now);\n        if (this.preTapPosition.x !== null) {\n            this.isDoubleTap = (this.delta > 0 && this.delta <= 250 && Math.abs(this.preTapPosition.x - this.x1) < 30 && Math.abs(this.preTapPosition.y - this.y1) < 30);\n        }\n        this.preTapPosition.x = this.x1;\n        this.preTapPosition.y = this.y1;\n        this.last = this.now;\n        var preV = this.preV, len = evt.touches.length;\n        if (len > 1) {\n            this._cancelLongTap();\n            this._cancelSingleTap();\n            var v = { x: evt.touches[1].pageX - this.x1, y: evt.touches[1].pageY - this.y1 };\n            preV.x = v.x;\n            preV.y = v.y;\n            this.pinchStartLen = this.getLen(preV);\n            this.fire('multipointstart', evt);\n        }\n        else {\n            this.isSingleTap = true;\n        }\n        this.longTapTimeout = setTimeout(function () {\n            _this.fire('longtap', evt);\n            _this.afterLongTap = true;\n            _this.afterLongTapTimeout = setTimeout(function () {\n                _this.afterLongTap = false;\n            }, 1000);\n        }, 750);\n    };\n    Finger.prototype._handleTouchMove = function (evt) {\n        //this.fire('touchmove', evt);\n        var preV = this.preV, len = evt.touches.length, currentX = evt.touches[0].pageX, currentY = evt.touches[0].pageY;\n        this.isSingleTap = false;\n        this.isDoubleTap = false;\n        if (len > 1) {\n            var v = { x: evt.touches[1].pageX - currentX, y: evt.touches[1].pageY - currentY };\n            if (preV.x !== null) {\n                if (this.pinchStartLen > 0) {\n                    evt.center = {\n                        x: (evt.touches[1].pageX + currentX) / 2,\n                        y: (evt.touches[1].pageY + currentY) / 2\n                    };\n                    evt.scale = evt.zoom = this.getLen(v) / this.pinchStartLen;\n                    this.fire('pinch', evt);\n                }\n                evt.angle = this.getRotateAngle(v, preV);\n                this.fire('rotate', evt);\n            }\n            preV.x = v.x;\n            preV.y = v.y;\n            this.multiTouch = true;\n        }\n        else {\n            if (this.x2 !== null) {\n                evt.deltaX = currentX - this.x2;\n                evt.deltaY = currentY - this.y2;\n            }\n            else {\n                evt.deltaX = 0;\n                evt.deltaY = 0;\n            }\n            this.fire('pressmove', evt);\n        }\n        this._cancelLongTap();\n        this.x2 = currentX;\n        this.y2 = currentY;\n        if (len > 1) {\n            evt.preventDefault();\n        }\n    };\n    Finger.prototype._handleTouchCancel = function (evt) {\n        //this.fire('touchcancel', evt);\n        clearInterval(this.singleTapTimeout);\n        clearInterval(this.tapTimeout);\n        clearInterval(this.longTapTimeout);\n        clearInterval(this.swipeTimeout);\n    };\n    Finger.prototype._handleTouchEnd = function (evt) {\n        var _this = this;\n        //this.fire('touchend', evt);\n        this.end = Date.now();\n        this._cancelLongTap();\n        if (this.multiTouch === true && evt.touches.length < 2) {\n            this.fire('multipointend', evt);\n        }\n        evt.origin = [this.x1, this.y1];\n        if (this.multiTouch === false) {\n            if ((this.x2 && Math.abs(this.x1 - this.x2) > 30) ||\n                (this.y2 && Math.abs(this.y1 - this.y2) > 30)) {\n                evt.direction = this._swipeDirection(this.x1, this.x2, this.y1, this.y2);\n                evt.distance = Math.abs(this.x1 - this.x2);\n                this.swipeTimeout = setTimeout(function () {\n                    _this.fire('swipe', evt);\n                }, 0);\n            }\n            else {\n                if (this.afterLongTap) {\n                    clearTimeout(this.afterLongTapTimeout);\n                    this.afterLongTap = false;\n                }\n                else {\n                    this.tapTimeout = setTimeout(function () {\n                        //this.fire('tap', evt);\n                        if (_this.isDoubleTap) {\n                            _this.fire('doubletap', evt);\n                            clearTimeout(_this.singleTapTimeout);\n                            _this.isDoubleTap = false;\n                        }\n                        else if (_this.isSingleTap) {\n                            _this.singleTapTimeout = setTimeout(function () {\n                                _this.fire('singletap', evt);\n                            }, 250);\n                            _this.isSingleTap = false;\n                        }\n                    }, 0);\n                }\n            }\n        }\n        this.preV.x = 0;\n        this.preV.y = 0;\n        this.scale = 1;\n        this.pinchStartLen = null;\n        this.x1 = this.x2 = this.y1 = this.y2 = null;\n        this.multiTouch = false;\n    };\n    Finger.prototype._cancelLongTap = function () {\n        clearTimeout(this.longTapTimeout);\n    };\n    Finger.prototype._cancelSingleTap = function () {\n        clearTimeout(this.singleTapTimeout);\n    };\n    Finger.prototype._swipeDirection = function (x1, x2, y1, y2) {\n        return Math.abs(x1 - x2) >=\n            Math.abs(y1 - y2) ? (x1 - x2 > 0 ? 'Left' : 'Right') : (y1 - y2 > 0 ? 'Up' : 'Down');\n    };\n    Finger.prototype.installed = function () {\n        var ele = this.childNodes[0];\n        ele.addEventListener('touchstart', this._handleTouchStart);\n        ele.addEventListener('touchmove', this._handleTouchMove);\n        ele.addEventListener('touchcancel', this._handleTouchCancel);\n        ele.addEventListener('touchend', this._handleTouchEnd);\n    };\n    Finger.prototype.render = function () {\n        return omi_1.h(\"slot\", null);\n    };\n    Finger.css = \":host {\\n  display: inline-block;\\n}\";\n    Finger = __decorate([\n        omi_1.tag('m-finger')\n    ], Finger);\n    return Finger;\n}(omi_1.WeElement));\nexports.default = Finger;\n","module.exports = __WEBPACK_EXTERNAL_MODULE_omi__;"],"sourceRoot":""}