{"version":3,"file":"omiv.esm.js","sources":["../src/obaa.js","../src/path.js","../src/plugins/logger.js","../src/vue.js","../src/omiv.js"],"sourcesContent":["export function obaa(target, arr, callback) {\n  let eventPropArr = []\n  if (isArray(target)) {\n    if (target.length === 0) {\n      target.__o_ = {\n        __r_: target,\n        __p_: '#'\n      }\n    }\n    mock(target, target)\n  }\n  for (let prop in target) {\n    if (target.hasOwnProperty(prop)) {\n      if (callback) {\n        if (isArray(arr) && isInArray(arr, prop)) {\n          eventPropArr.push(prop)\n          watch(target, prop, null, target)\n        } else if (isString(arr) && prop === arr) {\n          eventPropArr.push(prop)\n          watch(target, prop, null, target)\n        }\n      } else {\n        eventPropArr.push(prop)\n        watch(target, prop, null, target)\n      }\n    }\n  }\n  if (!target.__c_) {\n    target.__c_ = []\n  }\n  let propChanged = callback ? callback : arr\n  target.__c_.push({\n    all: !callback,\n    propChanged,\n    eventPropArr\n  })\n}\n\nlet triggerStr = [\n  'concat',\n  'copyWithin',\n  'fill',\n  'pop',\n  'push',\n  'reverse',\n  'shift',\n  'sort',\n  'splice',\n  'unshift',\n  'size'\n].join(',')\n\nlet methods = [\n  'concat',\n  'copyWithin',\n  'entries',\n  'every',\n  'fill',\n  'filter',\n  'find',\n  'findIndex',\n  'forEach',\n  'includes',\n  'indexOf',\n  'join',\n  'keys',\n  'lastIndexOf',\n  'map',\n  'pop',\n  'push',\n  'reduce',\n  'reduceRight',\n  'reverse',\n  'shift',\n  'slice',\n  'some',\n  'sort',\n  'splice',\n  'toLocaleString',\n  'toString',\n  'unshift',\n  'values',\n  'size'\n]\n\nfunction mock(target, root) {\n  methods.forEach(item => {\n    target[item] = function() {\n      let old = Array.prototype.slice.call(this, 0)\n      let result = Array.prototype[item].apply(\n        this,\n        Array.prototype.slice.call(arguments)\n      )\n      if (new RegExp('\\\\b' + item + '\\\\b').test(triggerStr)) {\n        for (let cprop in this) {\n          if (this.hasOwnProperty(cprop) && !isFunction(this[cprop])) {\n            watch(this, cprop, this.__o_.__p_, root)\n          }\n        }\n        //todo\n        onPropertyChanged(\n          'Array-' + item,\n          this,\n          old,\n          this,\n          this.__o_.__p_,\n          root\n        )\n      }\n      return result\n    }\n    target[\n      'pure' + item.substring(0, 1).toUpperCase() + item.substring(1)\n    ] = function() {\n      return Array.prototype[item].apply(\n        this,\n        Array.prototype.slice.call(arguments)\n      )\n    }\n  })\n}\n\nfunction watch(target, prop, path, root) {\n  if (prop === '__o_') return\n  if (isFunction(target[prop])) return\n  if (!target.__o_)\n    target.__o_ = {\n      __r_: root\n    }\n  if (path !== undefined && path !== null) {\n    target.__o_.__p_ = path\n  } else {\n    target.__o_.__p_ = '#'\n  }\n\n  let currentValue = (target.__o_[prop] = target[prop])\n  Object.defineProperty(target, prop, {\n    get() {\n      return this.__o_[prop]\n    },\n    set(value) {\n      let old = this.__o_[prop]\n      this.__o_[prop] = value\n      onPropertyChanged(prop, value, old, this, target.__o_.__p_, root)\n    },\n    configurable: true,\n    enumerable: true\n  })\n  if (typeof currentValue === 'object') {\n    if (isArray(currentValue)) {\n      mock(currentValue, root)\n      if (currentValue.length === 0) {\n        if (!currentValue.__o_) currentValue.__o_ = {}\n        if (path !== undefined && path !== null) {\n          currentValue.__o_.__p_ = path + '-' + prop\n        } else {\n          currentValue.__o_.__p_ = '#-' + prop\n        }\n      }\n    }\n    for (let cprop in currentValue) {\n      if (currentValue.hasOwnProperty(cprop)) {\n        watch(currentValue, cprop, target.__o_.__p_ + '-' + prop, root)\n      }\n    }\n  }\n}\n\nfunction onPropertyChanged(prop, value, oldValue, target, path, root) {\n  if (value !== oldValue && !(nan(value) && nan(oldValue)) && root.__c_) {\n    let rootName = getRootName(prop, path)\n    for (let i = 0, len = root.__c_.length; i < len; i++) {\n      let handler = root.__c_[i]\n      if (\n        handler.all ||\n        isInArray(handler.eventPropArr, rootName) ||\n        rootName.indexOf('Array-') === 0\n      ) {\n        handler.propChanged.call(target, prop, value, oldValue, path)\n      }\n    }\n  }\n\n  if (prop.indexOf('Array-') !== 0 && typeof value === 'object') {\n    watch(target, prop, target.__o_.__p_, root)\n  }\n}\n\nfunction isFunction(obj) {\n  return Object.prototype.toString.call(obj) === '[object Function]'\n}\n\nfunction nan(value) {\n  return typeof value === 'number' && isNaN(value)\n}\n\nfunction isArray(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]'\n}\n\nfunction isString(obj) {\n  return typeof obj === 'string'\n}\n\nfunction isInArray(arr, item) {\n  for (let i = arr.length; --i > -1; ) {\n    if (item === arr[i]) return true\n  }\n  return false\n}\n\nfunction getRootName(prop, path) {\n  if (path === '#') {\n    return prop\n  }\n  return path.split('-')[1]\n}\n\nobaa.add = function(obj, prop) {\n  watch(obj, prop, obj.__o_.__p_, obj.__o_.__r_)\n}\n\nobaa.set = function(obj, prop, value) {\n  watch(obj, prop, obj.__o_.__p_, obj.__o_.__r_)\n  obj[prop] = value\n}\n\n//@ts-ignore\n/* eslint-disable */\nArray.prototype.size = function (length) {\n  this.length = length\n}\n","export function getUsing(data, paths) {\n  const obj = []\n  paths.forEach((path, index) => {\n    const isPath = typeof path === 'string'\n    if (isPath) {\n      obj[index] = getTargetByPath(data, path)\n    } else {\n      const key = Object.keys(path)[0]\n      const value = path[key]\n      if (typeof value === 'string') {\n        obj[index] = getTargetByPath(data, value)\n      } else {\n        const tempPath = value[0]\n        if (typeof tempPath === 'string') {\n          const tempVal = getTargetByPath(data, tempPath)\n          obj[index] = value[1] ? value[1](tempVal) : tempVal\n        } else {\n          const args = []\n          tempPath.forEach(path => {\n            args.push(getTargetByPath(data, path))\n          })\n          obj[index] = value[1].apply(null, args)\n        }\n      }\n      obj[key] = obj[index]\n    }\n  })\n  return obj\n}\n\nexport function getTargetByPath(origin, path) {\n  const arr = path\n    .replace(/]/g, '')\n    .replace(/\\[/g, '.')\n    .split('.')\n  let current = origin\n  for (let i = 0, len = arr.length; i < len; i++) {\n    current = current[arr[i]]\n  }\n  return current\n}\n\nexport function getPath(obj, out, name) {\n  const result = {}\n  obj.forEach(item => {\n    if (typeof item === 'string') {\n      result[item] = true\n    } else {\n      const tempPath = item[Object.keys(item)[0]]\n      if (typeof tempPath === 'string') {\n        result[tempPath] = true\n      } else if (typeof tempPath[0] === 'string') {\n        result[tempPath[0]] = true\n      } else {\n        tempPath[0].forEach(path => (result[path] = true))\n      }\n    }\n  })\n  out && (out[name] = result)\n  return result\n}\n\nexport function needUpdate(diffResult, updatePath) {\n  for (let keyA in diffResult) {\n    if (updatePath[keyA]) {\n      return true\n    }\n    for (let keyB in updatePath) {\n      if (includePath(keyA, keyB)) {\n        return true\n      }\n    }\n  }\n  return false\n}\n\nfunction includePath(pathA, pathB) {\n  if (pathA.indexOf(pathB) === 0) {\n    const next = pathA.substr(pathB.length, 1)\n    if (next === '[' || next === '.') {\n      return true\n    }\n  }\n  return false\n}\n\nexport function fixPath(path) {\n  let mpPath = ''\n  const arr = path.replace('#-', '').split('-')\n  arr.forEach((item, index) => {\n    if (index) {\n      if (isNaN(Number(item))) {\n        mpPath += '.' + item\n      } else {\n        mpPath += '[' + item + ']'\n      }\n    } else {\n      mpPath += item\n    }\n  })\n  return mpPath\n}\n","function repeat(str, times) {\n  return new Array(times + 1).join(str)\n}\n\nfunction pad(num, maxLength) {\n  return repeat('0', maxLength - num.toString().length) + num\n}\n\nfunction find(list, f) {\n  return list.filter(f)[0]\n}\n\nfunction deepCopy(obj, cache = []) {\n  // just return if obj is immutable value\n  if (obj === null || typeof obj !== 'object') {\n    return obj\n  }\n\n  // if obj is hit, it is in circular structure\n  const hit = find(cache, c => c.original === obj)\n  if (hit) {\n    return hit.copy\n  }\n\n  const copy = Array.isArray(obj) ? [] : {}\n  // put the copy into cache at first\n  // because we want to refer it in recursive deepCopy\n  cache.push({\n    original: obj,\n    copy\n  })\n\n  Object.keys(obj).forEach(key => {\n    // filter internal attrs\n    if (key.startsWith('__')) return\n    copy[key] = deepCopy(obj[key], cache)\n  })\n\n  return copy\n}\n\nexport default function createLogger({\n  collapsed = true,\n  logger = console\n} = {}) {\n  return store => {\n    let prevState = deepCopy(store.data)\n\n    if (!store._subscribers) {\n      store._subscribers = []\n    }\n\n    store._subscribers.push((mutation, state) => {\n      if (typeof logger === 'undefined') {\n        return\n      }\n      const nextState = deepCopy(state)\n\n      const time = new Date()\n      const formattedTime = ` @ ${pad(time.getHours(), 2)}:${pad(\n        time.getMinutes(),\n        2\n      )}:${pad(time.getSeconds(), 2)}.${pad(time.getMilliseconds(), 3)}`\n      const message = `mutation ${mutation.type}${formattedTime}`\n      const startMessage = collapsed ? logger.groupCollapsed : logger.group\n\n      // render\n      try {\n        startMessage.call(logger, message)\n      } catch (e) {\n        // eslint-disable-next-line\n        console.log(message)\n      }\n\n      logger.log(\n        '%c prev state',\n        'color: #9E9E9E; font-weight: bold',\n        prevState\n      )\n      logger.log(\n        '%c mutation',\n        'color: #03A9F4; font-weight: bold',\n        mutation.type,\n        mutation.value\n      )\n      logger.log(\n        '%c next state',\n        'color: #4CAF50; font-weight: bold',\n        nextState\n      )\n\n      try {\n        logger.groupEnd()\n      } catch (e) {\n        logger.log('—— log end ——')\n      }\n\n      prevState = nextState\n    })\n  }\n}\n","import { obaa } from './obaa'\nimport { getPath, needUpdate, fixPath } from './path'\nimport createLogger from './plugins/logger'\n\nlet Vue\nlet store\nlet isMultiStore = false\n\nexport function $(options) {\n  const beforeCreate = options.beforeCreate\n  const destroyed = options.destroyed\n  const use = options.use\n  const useSelf = options.useSelf\n  options.computed = options.computed || {}\n\n  if (options.store) {\n    reset(options.store)\n  }\n\n  options.beforeCreate = function () {\n    this.$store = store\n    if (isMultiStore) {\n      if (use) {\n        let updatePath = {}\n        for (let storeName in use) {\n          getPath(use[storeName], updatePath, storeName)\n          store[storeName].components.push(this)\n        }\n        this.__$updatePath_ = updatePath\n      }\n\n      if (useSelf) {\n        let updateSelfPath = {}\n        for (let storeName in useSelf) {\n          getPath(useSelf[storeName], updateSelfPath, storeName)\n          store[storeName].updateSelfComponents.push(this)\n        }\n        this.__$updateSelfPath_ = updateSelfPath\n      }\n    } else {\n      if (use) {\n        this.__$updatePath_ = getPath(use)\n        store.components.push(this)\n      }\n      if (useSelf) {\n        this.__$updateSelfPath_ = getPath(useSelf)\n        store.updateSelfComponents.push(this)\n      }\n    }\n    beforeCreate && beforeCreate.apply(this, arguments)\n  }\n\n  options.destroyed = function () {\n    if (isMultiStore) {\n      for (let key in store) {\n        if (key !== 'replaceState') {\n          removeItem(this, store[key].components)\n          removeItem(this, store[key].updateSelfComponents)\n        }\n      }\n    } else {\n      removeItem(this, store.updateSelfComponents)\n      removeItem(this, store.components)\n    }\n\n    destroyed && destroyed.apply(this, arguments)\n  }\n\n  options.computed.state = function () {\n    if (isMultiStore) {\n      let state = {}\n      Object.keys(store).forEach(k => {\n        state[k] = store[k].data\n      })\n      return state\n    }\n    return store.data\n  }\n\n  options.computed.store = function () {\n    return store\n  }\n\n  return options\n}\n\nfunction recUpdate(root) {\n  root.$forceUpdate()\n  root.$children.forEach(child => {\n    recUpdate(child)\n  })\n}\n\nfunction observe(store, storeName) {\n  store.components = []\n  store.updateSelfComponents = []\n  store._subscribers = []\n\n  if (store.logPlugin) {\n    store.plugins = store.plugins\n      ? [...store.plugins, createLogger()]\n      : [createLogger()]\n  }\n\n  // 启动插件\n  const { plugins = [] } = store\n  if (plugins.length) {\n    plugins.forEach(plugin => plugin(store))\n  }\n\n  // 非 window 环境下不需要观察数据\n  if (typeof window === 'undefined') return\n\n  obaa(store.data, (prop, val, old, path) => {\n    const patch = {}\n\n    patch[fixPath(path + '-' + prop)] = true\n\n    store._subscribers.forEach(sub =>\n      sub({ type: path + '-' + prop, value: val }, store.data)\n    )\n\n    store.components.forEach(component => {\n      const p = component.__$updatePath_\n      if (storeName) {\n        if (p && p[storeName] && needUpdate(patch, p[storeName])) {\n          recUpdate(component)\n        }\n      } else if (p && needUpdate(patch, p)) {\n        recUpdate(component)\n      }\n    })\n\n    store.updateSelfComponents.forEach(component => {\n      const sp = component.__$updateSelfPath_\n      if (storeName) {\n        if (sp && sp[storeName] && needUpdate(patch, sp[storeName])) {\n          component.$forceUpdate()\n        }\n      } else if (sp && needUpdate(patch, sp)) {\n        component.$forceUpdate()\n      }\n    })\n  })\n}\n\nfunction removeItem(item, arr) {\n  for (let i = 0, len = arr.length; i < len; i++) {\n    if (arr[i] === item) {\n      arr.splice(i, 1)\n      break\n    }\n  }\n}\n\nexport function render(app, renderTo, initStore, options) {\n  if (!Vue) {\n    if (process.env.NODE_ENV !== 'production') {\n      // eslint-disable-next-line\n      console.error(\n        '[Omiv] has not been installed yet. Vue.use(Omiv) should be called first.'\n      )\n    }\n    return\n  }\n  // fix: 如果是在子节点通过 $ 注入的 store， 在 根实例中拿不到 $store\n  initStore = initStore || store\n  reset(initStore)\n\n  return new Vue(\n    Object.assign(\n      {\n        render: h => h(app)\n      },\n      options,\n      initStore ? { store: initStore } : {}\n    )\n  ).$mount(renderTo)\n}\n\nexport function reset(s) {\n  if (s) {\n    store = s\n    if (store.data) {\n      isMultiStore = false\n      observe(store)\n    } else {\n      isMultiStore = true\n      for (let key in store) {\n        if (store[key].data) {\n          observe(store[key], key)\n        }\n      }\n    }\n  } else {\n    // 为了测试用例正确执行的特殊处理，测试用例中多次执行 Omiv.render\n    // 导致 store 变量存储的是上一个用例的 store，使得再次调用 Omiv.render(Component, '#app')\n    // 不传 store 的时候，会被污染，导致用例执行异常。正常项目中应该不会走到这里的逻辑。\n    store = undefined\n  }\n}\n\n// Vue.use 会判断是否重复安装\nexport function install(_Vue) {\n  Vue = _Vue\n  applyMixin(Vue)\n}\n\nfunction applyMixin(Vue) {\n  const omivComputed = {\n    $state() {\n      if (isMultiStore) {\n        let state = {}\n        Object.keys(this.$store).forEach(k => {\n          state[k] = store[k].data\n        })\n        return state\n      }\n      return this.$store.data\n    }\n  }\n\n  function omivInit() {\n    const options = this.$options\n    const use = options.use\n    const useSelf = options.useSelf\n\n    // TODO: 可能要处理一下在不同地方注入多个 store ？\n\n    if (options.store) {\n      this.$store =\n        typeof options.store === 'function' ? options.store() : options.store\n    } else if (options.parent && options.parent.$store) {\n      this.$store = options.parent.$store\n    }\n\n    // 在 ssr 中用于替换 store\n    if (this.$store && !this.$store.replaceState) {\n      this.$store.replaceState = (store = {}) => {\n        Object.keys(store).forEach(key => {\n          // 过滤观察字段\n          if (!key.startsWith('_')) {\n            this.$store.data[key] = store[key]\n          }\n        })\n      }\n    }\n\n    // 修复不是在 main.js 中注入 store 的问题\n    if (this.$store && !store) {\n      reset(this.$store)\n    }\n\n    if (isMultiStore) {\n      if (use) {\n        let updatePath = {}\n        for (let storeName in use) {\n          getPath(use[storeName], updatePath, storeName)\n          this.$store[storeName].components.push(this)\n        }\n        this.__$updatePath_ = updatePath\n      }\n\n      if (useSelf) {\n        let updateSelfPath = {}\n        for (let storeName in useSelf) {\n          getPath(useSelf[storeName], updateSelfPath, storeName)\n          this.$store[storeName].updateSelfComponents.push(this)\n        }\n        this.__$updateSelfPath_ = updateSelfPath\n      }\n    } else {\n      if (use) {\n        // { count: true }\n        this.__$updatePath_ = getPath(use)\n        // 依赖 store 的组件，压入了一个 vm 实例\n        this.$store.components.push(this)\n      }\n      if (useSelf) {\n        this.__$updateSelfPath_ = getPath(useSelf)\n        this.$store.updateSelfComponents.push(this)\n      }\n    }\n  }\n\n  function omivDestroyed() {\n    if (this.$store) { //防止其他组件库 this.$store undefined 进入 omivDestroyed 报错\n      if (isMultiStore) {\n        for (let key in this.$store) {\n          if (key !== 'replaceState') {\n            removeItem(this, this.$store[key].components)\n            removeItem(this, this.$store[key].updateSelfComponents)\n          }\n        }\n      } else {\n        removeItem(this, this.$store.updateSelfComponents)\n        removeItem(this, this.$store.components)\n      }\n    }\n  }\n\n  Vue.mixin({\n    beforeCreate: omivInit,\n    computed: omivComputed,\n    destroyed: omivDestroyed\n  })\n}\n","import { $, render, reset, install } from './vue'\n\nexport default { $, render, reset, install }\n\nexport { $, render, reset, install }\n"],"names":["obaa","target","arr","callback","eventPropArr","isArray","length","__o_","prop","hasOwnProperty","isInArray","push","isString","__c_","propChanged","triggerStr","join","methods","mock","root","forEach","item","old","Array","prototype","slice","call","result","apply","arguments","RegExp","test","cprop","isFunction","__p_","substring","toUpperCase","watch","path","undefined","currentValue","defineProperty","value","onPropertyChanged","oldValue","nan","rootName","getRootName","i","len","handler","all","indexOf","obj","Object","toString","isNaN","split","add","__r_","set","size","getPath","out","name","tempPath","keys","needUpdate","diffResult","updatePath","keyA","keyB","includePath","pathA","pathB","next","substr","fixPath","mpPath","replace","index","Number","repeat","str","times","pad","num","maxLength","find","list","f","filter","deepCopy","cache","hit","c","original","copy","key","startsWith","createLogger","collapsed","logger","console","prevState","store","data","_subscribers","mutation","state","nextState","time","Date","formattedTime","getHours","getMinutes","getSeconds","getMilliseconds","message","type","startMessage","groupCollapsed","group","e","log","groupEnd","Vue","isMultiStore","$","options","beforeCreate","destroyed","use","useSelf","computed","$store","storeName","components","__$updatePath_","updateSelfPath","updateSelfComponents","__$updateSelfPath_","k","recUpdate","$forceUpdate","$children","child","observe","logPlugin","plugins","plugin","window","val","patch","sub","p","component","sp","removeItem","splice","render","app","renderTo","initStore","process","env","NODE_ENV","error","assign","h","$mount","reset","s","install","_Vue","applyMixin","omivComputed","omivInit","$options","parent","replaceState","omivDestroyed","mixin"],"mappings":"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"}